<!doctype html>
<html lang="en">

<head>
    <title>Title</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous" />
</head>

<body>
    <div class="container ">
        <table class="table table-bordered mt-3">
            <thead>
                <tr>
                    <th>產品</th>
                    <th>單價</th>
                    <th>數量</th>
                    <th>價格</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>
                        <h3>咖啡</h3>
                    </td>
                    <td>
                        <input type="number" readonly class="form-control" id="price1" value="100">
                    </td>
                    <td>
                        <input type="number" class="form-control" id="count1" value="0">
                    </td>
                    <td>
                        <input type="text"  readonly class="form-control" id="total1" value="0">
                    </td>
                </tr>
                <tr>
                    <td>
                        <h3>蛋糕</h3>
                    </td>
                    <td>
                        <input type="number" readonly class="form-control" id="price2" value="150">
                    </td>
                    <td>
                        <input type="number" class="form-control" id="count2" value="0">
                    </td>
                    <td>
                        <input type="text"  readonly class="form-control" id="total2" value="0">
                    </td>
                </tr>
                <tr>
                    <td>
                        <h3>果汁</h3>
                    </td>
                    <td>
                        <input type="number" readonly class="form-control" id="price3" value="50">
                    </td>
                    <td>
                        <input type="number" class="form-control" id="count3" value="0">
                    </td>
                    <td>
                        <input type="text" readonly class="form-control" id="total3" value="0">
                    </td>
                </tr>
                <tr>
                    <td>
                        <h3>總價</h3>
                    </td>
                    <td colspan="2" id="alltotal">
                        <span id="result">

                        </span>
                    </td>
                    <td style="text-align: center;">
                        <button type="button" class="btn btn-success" id="totalbtn">總計(滿500打8折)</button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    <script>
        function item1Fun() {
      let getItem1Price = Number(price1.value);
      let getItem1Num = Number(count1.value);
      let resultItem1Total = getItem1Price * getItem1Num;
      item1Total.value = resultItem1Total;
    }
        function item2Fun() {
      let getItem2Price = Number(price2.value);
      let getItem2Num = Number(count2.value);
      let resultItem2Total = getItem2Price * getItem2Num;
      item2Total.value = resultItem2Total;
    }
        function item3Fun() {
      let getItem3Price = Number(price3.value);
      let getItem3Num = Number(count3.value);
      let resultItem3Total = getItem3Price * getItem3Num;
      item3Total.value = resultItem3Total;
    }

    const item1Price = document.getElementById('price1');
    const item1Num = document.getElementById('count1');
    const item1Total = document.getElementById('total1');
    const item2Price = document.getElementById('price2');
    const item2Num = document.getElementById('count2');
    const item2Total = document.getElementById('total2');
    const item3Price = document.getElementById('price3');
    const item3Num = document.getElementById('count3');
    const item3Total = document.getElementById('total3');
    const totalbtn = document.getElementById('totalbtn');
    const result = document.getElementById('result');
    

    // item1
    item1Price.addEventListener('change', function () {
      item1Fun();
    });
    item1Num.addEventListener('change', function () {
      item1Fun();
    });
    item2Price.addEventListener('change', function () {
      item2Fun();
    });
    item2Num.addEventListener('change', function () {
      item2Fun();
    });
    item3Price.addEventListener('change', function () {
      item3Fun();
    });
    item3Num.addEventListener('change', function () {
      item3Fun();
    });

    totalbtn.addEventListener('click',function () {
        let getItem1total=Number(item1Total.value);
        let getItem2total=Number(item2Total.value);
        let getItem3total=Number(item3Total.value);
        let sum =getItem1total+getItem2total+getItem3total;
        if (sum>=500) {
            sum=sum*0.8;
        }
        result.innerText=sum;
    })


    </script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
        integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
        crossorigin="anonymous"></script>
</body>
</html>